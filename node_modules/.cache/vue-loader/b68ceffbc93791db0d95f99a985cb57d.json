{"remainingRequest":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\kp_amikom\\views\\src\\views\\Users\\pages\\ListDosen.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\src\\views\\Users\\pages\\ListDosen.vue","mtime":1576055138948},{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\kp_amikom\\views\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data: () => ({\r\n    headers: [\r\n      {\r\n        text: \"Nama\",\r\n        align: \"left\",\r\n        sortable: true,\r\n        value: \"nama\"\r\n      },\r\n      { text: \"Nidn\", value: \"nidn\", sortable: false },\r\n      { text: \"Email\", value: \"email\", sortable: false },\r\n      {\r\n        text: \"Kategori\",\r\n        value: \"kategori\",\r\n        sortable: false,\r\n        filter: value => {\r\n          return value === \"Dosen\";\r\n        }\r\n      },\r\n      { text: \"Action\", value: \"action\", sortable: false }\r\n    ],\r\n    // tipe_items: [\r\n    //   { name: \"SK Penguji\", value: \"SK Penguji\" },\r\n    //   { name: \"SK Mengajar\", value: \"SK Mengajar\" },\r\n    //   { name: \"SK Dosen Pembimbing\", value: \"SK Dosen Pembimbing\" }\r\n    // ],\r\n    tipe_items: [\r\n      { name: \"External\", value: \"P\" },\r\n      {\r\n        name: \"Internal\",\r\n        value: \"FASBIS\"\r\n      }\r\n    ],\r\n    tipe_perihal: [\r\n      { name: \"Surat Dosen\", value: \"01\" },\r\n      { name: \"Memo\", value: \"02\" },\r\n      { name: \"Surat Pengantar\", value: \"03\" },\r\n      { name: \"Surat Edaran\", value: \"04\" },\r\n      { name: \"Surat Undangan\", value: \"05\" },\r\n      { name: \"Surat Tugas\", value: \"06\" },\r\n      { name: \"Surat Kuasa\", value: \"07\" },\r\n      { name: \"Surat Pengumuman\", value: \"08\" },\r\n      { name: \"Surat Pernyataan\", value: \"09\" },\r\n      { name: \"Surat Keterangan\", value: \"10\" },\r\n      { name: \"Surat Keputusan\", value: \"11\" },\r\n      { name: \"Surat Permohonan\", value: \"12\" },\r\n      { name: \"Surat Peringatan\", value: \"13\" },\r\n      { name: \"Surat Peminjaman\", value: \"14\" },\r\n      { name: \"Surat Perjanjian\", value: \"15\" },\r\n      { name: \"Berita Acara\", value: \"16\" }\r\n    ],\r\n    perihal: \"\",\r\n    dosen: [],\r\n    show: false,\r\n    valid: true,\r\n    lazy: false,\r\n    passwordRules: [\r\n      v => !!v || \"Password harus diisi\",\r\n      v => v.length > 5 || \"Password harus lebih dari 6 karakter\"\r\n    ],\r\n    emailRules: [\r\n      v => !!v || \"E-mail harus diisi\",\r\n      v => /.+@.+/.test(v) || \"E-mail harus valid\",\r\n      v =>\r\n        /^[A-Za-z0-9._%=-]+@amikompurwokerto.ac.id$/.test(v) ||\r\n        \"Gunakan email amikompurwokerto.ac.id\"\r\n    ],\r\n    nidnRules: [\r\n      v => !!v || \"Nidn harus diisi\",\r\n      v => v.length < 11 || \"Nidn tidak boleh lebih dari 10 karakter\",\r\n      v => /^\\d+$/.test(v) || \"Nidn harus angka\"\r\n    ],\r\n    namaRules: [\r\n      v => !!v || \"Nama harus diisi\",\r\n      v => /^[A-Za-z\\s]*$/.test(v) || \"Nama tidak boleh mengandung angka\"\r\n    ],\r\n    emailValid: \"\",\r\n    search: \"\",\r\n    tipe_surat: null,\r\n    dialogAdd: false,\r\n    dialogConfirm: false,\r\n    dialogUpdate: false,\r\n    dialogSurat: false,\r\n    dialogEmail: false,\r\n    dialogSuratBanyak: false,\r\n    snackbar: false,\r\n    snackbarDelete: false,\r\n    timeout: 2000,\r\n    nama: \"\",\r\n    nidn: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    kategori: \"Dosen\",\r\n    judul_surat: \"\",\r\n    jenis_surat: \"\",\r\n    file_surat: null,\r\n    suratURL: \"\",\r\n    suratFile: \"\",\r\n    suratType: \"\",\r\n    urutan_surat: \"\",\r\n    id_user: \"\",\r\n    filter: \"Dosen\",\r\n    selected: [],\r\n    Email: \"\",\r\n    id_pengirim: \"\"\r\n  }),\r\n  created() {\r\n    this.getData();\r\n    this.getCurrentUser();\r\n  },\r\n  methods: {\r\n    multiple: function() {\r\n      // console.log();\r\n    },\r\n    getData: function() {\r\n      this.axios\r\n        .get(\"/user\")\r\n        .then(res => {\r\n          this.dosen = res.data.data;\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getCurrentUser: function() {\r\n      let userData = JSON.parse(localStorage.getItem(\"user\"));\r\n      this.currentUser = userData[0];\r\n    },\r\n    reset() {\r\n      this.$refs.form.reset();\r\n      this.dialogAdd = false;\r\n      this.dialogUpdate = false;\r\n      this.dialogSurat = false;\r\n      this.dialogConfirm = false;\r\n      this.dialogSuratBanyak = false;\r\n    },\r\n    saveData() {\r\n      let data = {\r\n        nama: this.nama,\r\n        nidn: this.nidn,\r\n        email: this.email,\r\n        password: this.password,\r\n        kategori: this.kategori,\r\n        foto: this.suratFile,\r\n        ext: this.suratType\r\n      };\r\n      this.axios\r\n        .post(\"/user\", data)\r\n        .then(res => {\r\n          // console.log(res);\r\n\r\n          this.reset();\r\n          this.getData();\r\n\r\n          if (res.data.message === \"Email Sudah ada\") {\r\n            this.dialogEmail = true;\r\n            this.reset();\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    updateData() {\r\n      let data = {\r\n        id: this.id,\r\n        nama: this.nama,\r\n        nidn: this.nidn,\r\n        email: this.email,\r\n        //  password: this.password,\r\n        kategori: this.kategori,\r\n        foto: this.suratFile,\r\n        ext: this.suratType\r\n      };\r\n      this.axios\r\n        .put(\"/user\", data)\r\n        .then(res => {\r\n          this.dialogUpdate = false;\r\n          this.getData();\r\n          this.$refs.form.reset();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    deleteData(ida) {\r\n      let data = {\r\n        id: ida\r\n      };\r\n      this.axios\r\n        .post(\"/hapususer\", data)\r\n        .then(res => {\r\n          this.dialogConfirm = false;\r\n          this.snackbarDelete = true;\r\n          this.getData();\r\n          this.$refs.form.reset();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    checkTipe(value) {\r\n      this.jenis_surat = value;\r\n    },\r\n    sendData() {\r\n      let data_surat = {\r\n        urutan: this.urutan_surat,\r\n        judul_surat: this.judul_surat,\r\n        jenis_surat: this.jenis_surat,\r\n        id_user: this.selected,\r\n        id_pengirim: this.currentUser.id,\r\n        file_surat: this.suratFile,\r\n        ext: this.suratType,\r\n        perihal: this.perihal\r\n      };\r\n\r\n      this.axios\r\n        .post(\"/surat/multi\", data_surat)\r\n        .then(res => {\r\n          this.dialogSuratBanyak = false;\r\n          this.snackbar = true;\r\n          console.log(res);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    sendOneData() {\r\n      let data_surat = {\r\n        urutan: this.urutan_surat,\r\n        judul_surat: this.judul_surat,\r\n        jenis_surat: this.jenis_surat,\r\n        id_user: this.id,\r\n        id_pengirim: this.currentUser.id,\r\n        file_surat: this.suratFile,\r\n        ext: this.suratType,\r\n        perihal: this.perihal\r\n      };\r\n\r\n      this.axios\r\n        .post(\"/surat\", data_surat)\r\n        .then(res => {\r\n          this.dialogSurat = false;\r\n          this.snackbar = true;\r\n          console.log(res);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    deleteConfirm(id) {\r\n      this.id = id;\r\n      this.dialogConfirm = true;\r\n    },\r\n    kirimConfirm(id, nama) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.dialogSurat = true;\r\n    },\r\n    kirimConfirmBanyak(id, nama) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.dialogSuratBanyak = true;\r\n    },\r\n    updateConfirmation(id, nama, nidn, email, kategori) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.nidn = nidn;\r\n      this.email = email;\r\n      this.kategori = kategori;\r\n    },\r\n    onFilePicked(e) {\r\n      const fr = new FileReader();\r\n      fr.readAsDataURL(e);\r\n      fr.addEventListener(\"load\", () => {\r\n        this.suratURL = e;\r\n        this.suratFile = fr.result; // this is an image file that can be sent to server...\r\n        if (\r\n          e.type ===\r\n          \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n        ) {\r\n          this.suratType = \"application/docx\";\r\n        } else if (e.type === \"application/msword\") {\r\n          this.suratType = \"application/doc\";\r\n        } else if (e.type === \"application/pdf\") {\r\n          this.suratType = e.type;\r\n        } else {\r\n          this.suratType = e.type;\r\n        }\r\n        //console.log(fr.result);\r\n        //console.log(e.type);\r\n      });\r\n    },\r\n    validateEmail(v) {\r\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      if (re.test(this.email)) {\r\n        //Email valid. Procees to test if it's from the right domain (Second argument is to check that the string ENDS with this domain, and that it doesn't just contain it)\r\n        if (\r\n          this.email.indexOf(\r\n            \"@amikompurwokerto.ac.id\",\r\n            this.email.length - \"@amikompurwokerto.ac.id\".length\r\n          ) !== -1\r\n        ) {\r\n          //VALID\r\n          return (this.emailValid = null);\r\n          console.log(\"VALID\");\r\n        } else {\r\n          console.log(\"invalid\");\r\n          return (this.emailValid = \"Gunakan Email Amikompurwokerto.ac.id\");\r\n        }\r\n      }\r\n    },\r\n    coba(id, nama, nidn, email) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.nidn = nidn;\r\n      this.email = email;\r\n\r\n      let obj = {\r\n        id: this.id\r\n        // nama: this.nama,\r\n        // nidn: this.nidn,\r\n        // email:this.nidn\r\n      };\r\n      // var arr = [];\r\n      // arr.push(id);\r\n      this.selected.push(obj);\r\n      /*\r\n      selected: [{},{}]\r\n      */\r\n      console.log(this.selected);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["ListDosen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListDosen.vue","sourceRoot":"src/views/Users/pages","sourcesContent":["<template>\r\n  <div>\r\n    <!-- <v-toolbar dense flat dark color=\"purple darken-4\">\r\n  \r\n      <v-toolbar-items>\r\n        <v-btn text to=\"/dashboard/list_users\">Kirim semua</v-btn>\r\n        <v-btn text to=\"/dashboard/list_users/all\">Kirim satu persatu</v-btn>\r\n      </v-toolbar-items>\r\n\r\n    </v-toolbar>-->\r\n    <v-container class=\"pa-5\">\r\n      <v-app>\r\n        <v-snackbar bottom :timeout=\"timeout\" color=\"success\" v-model=\"snackbar\">\r\n          <v-icon left color=\"white\">done</v-icon>Surat berhasil dikirim\r\n          <v-btn text @click=\"snackbar = false\">Close</v-btn>\r\n        </v-snackbar>\r\n\r\n        <v-snackbar bottom color=\"success\" v-model=\"snackbarDelete\">\r\n          <v-icon left color=\"white\">done</v-icon>Dosen berhasil dihapus\r\n          <v-btn text @click=\"snackbarDelete = false\">Close</v-btn>\r\n        </v-snackbar>\r\n\r\n        <v-card-title>\r\n          <v-btn class=\"ma-2\" dark color=\"primary\" @click=\"kirimConfirmBanyak\">\r\n            <v-icon left>mdi-mail</v-icon>Kirim surat Ke Banyak\r\n          </v-btn>\r\n\r\n          <v-btn dark color=\"blue-grey darken-3\" @click=\"dialogAdd = true\">\r\n            <v-icon left>add</v-icon>Tambah Dosen\r\n          </v-btn>\r\n          <v-spacer></v-spacer>\r\n          <v-text-field\r\n            v-model=\"search\"\r\n            append-icon=\"search\"\r\n            label=\"Search\"\r\n            single-line\r\n            hide-details\r\n          ></v-text-field>\r\n        </v-card-title>\r\n\r\n        <!-- item-key=\"name\"\r\n        show-select-->\r\n        <v-data-table\r\n          v-model=\"selected\"\r\n          :headers=\"headers\"\r\n          :items=\"dosen\"\r\n          item-key=\"id\"\r\n          show-select\r\n          single-select\r\n          :search=\"search\"\r\n          class=\"elevation-1\"\r\n        >\r\n          <template v-slot:item.data-table-select=\"{ item }\">\r\n            <v-checkbox\r\n              color=\"green\"\r\n              v-model=\"item.selected\"\r\n              @change=\"coba(item.id, item.nama, item.nidn, item.email)\"\r\n            ></v-checkbox>\r\n          </template>\r\n\r\n          <template v-slot:item.action=\"{ item }\">\r\n            <v-btn class=\"ma-2\" dark color=\"primary\" @click=\"kirimConfirm(item.id, item.nama)\">\r\n              <v-icon left>mdi-mail</v-icon>Kirim surat\r\n            </v-btn>\r\n            <v-btn\r\n              class=\"ma-2\"\r\n              outlined\r\n              color=\"success\"\r\n              @click=\"updateConfirmation(item.id, item.nama, item.nidn, item.email, item.kategori), dialogUpdate= true\"\r\n            >\r\n              <v-icon left>mdi-pencil</v-icon>Edit\r\n            </v-btn>\r\n            <v-btn class=\"ma-2\" dark color=\"error\" @click=\"deleteConfirm(item.id, item.nama)\">\r\n              <v-icon left>mdi-delete</v-icon>Hapus\r\n            </v-btn>\r\n          </template>\r\n        </v-data-table>\r\n\r\n        <v-dialog v-model=\"dialogAdd\" persistent max-width=\"600px\">\r\n          <v-card class=\"pa-5\">\r\n            <h2 class=\"mb-5\">Tambah user</h2>\r\n            <v-divider class=\"mb-5\"></v-divider>\r\n            <v-card-text>\r\n              <v-form ref=\"form\" v-model=\"valid\" :lazy-validation=\"lazy\">\r\n                <v-text-field outlined v-model=\"nama\" :rules=\"namaRules\" label=\"Nama\"></v-text-field>\r\n                <v-text-field outlined v-model=\"email\" :rules=\"emailRules\" label=\"Email\"></v-text-field>\r\n                <v-text-field outlined v-model=\"nidn\" :rules=\"nidnRules\" label=\"NIDN\" counter=\"10\"></v-text-field>\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"password\"\r\n                  :append-icon=\"show ? 'visibility' : 'visibility_off'\"\r\n                  :rules=\"passwordRules\"\r\n                  :type=\"show ? 'text' : 'password'\"\r\n                  @click:append=\"show = !show\"\r\n                  label=\"Password\"\r\n                ></v-text-field>\r\n\r\n                <v-file-input\r\n                  outlined\r\n                  accept=\"image/png, image/jpeg, image/bmp\"\r\n                  placeholder=\"Pilih gambar...\"\r\n                  prepend-inner-icon=\"mdi-camera\"\r\n                  label=\"Gambar dosen\"\r\n                  ref=\"files\"\r\n                  type=\"file\"\r\n                  @change=\"onFilePicked\"\r\n                ></v-file-input>\r\n              </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn outlined @click=\"reset\">Batal</v-btn>\r\n              <v-btn color=\"primary\" :disabled=\"!valid\" @click=\"saveData\">Simpan</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <v-dialog v-model=\"dialogUpdate\" persistent max-width=\"600px\">\r\n          <v-card class=\"pa-5\">\r\n            <h2 class=\"mb-5\">Sunting user</h2>\r\n            <v-divider class=\"mb-5\"></v-divider>\r\n            <v-card-text>\r\n              <v-form ref=\"form\">\r\n                <v-text-field outlined v-model=\"nama\" :rules=\"namaRules\" label=\"Nama\"></v-text-field>\r\n                <v-text-field outlined v-model=\"nidn\" :rules=\"nidnRules\" label=\"NIDN\"></v-text-field>\r\n                <v-text-field outlined v-model=\"email\" :rules=\"emailRules\" :label=\"Email\"></v-text-field>\r\n                <v-file-input\r\n                  outlined\r\n                  accept=\"image/png, image/jpeg, image/bmp\"\r\n                  placeholder=\"Pilih gambar...\"\r\n                  prepend-inner-icon=\"mdi-camera\"\r\n                  label=\"Gambar dosen\"\r\n                  ref=\"files\"\r\n                  type=\"file\"\r\n                  @change=\"onFilePicked\"\r\n                ></v-file-input>\r\n                <!-- <v-text-field outlined v-model=\"kategori\" label=\"Kategori\"></v-text-field> -->\r\n              </v-form>\r\n            </v-card-text>\r\n\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn outlined @click=\"reset\">Batal</v-btn>\r\n\r\n              <v-btn color=\"primary\" @click=\"updateData\">Simpan</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <v-dialog v-model=\"dialogConfirm\" persistent max-width=\"500px\">\r\n          <v-divider></v-divider>\r\n          <v-card class=\"pa-5\">\r\n            <v-card-text>\r\n              <h1 style=\"line-height:1.5\">Apakah kamu yakin ingin menghapus artikel ini?</h1>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn outlined @click=\"dialogConfirm = false\">Batal</v-btn>\r\n\r\n              <v-btn color=\"error\" @click=\"deleteData(id), dialogConfirm= false\">Oke</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <!-- kirim surat dialog -->\r\n        <v-dialog v-model=\"dialogSurat\" persistent max-width=\"600px\">\r\n          <v-divider></v-divider>\r\n          <v-card class=\"pa-5\">\r\n            <v-card-text>\r\n              <h2 class=\"mb-5\">\r\n                Mengirim surat ke\r\n                <span class=\"purple--text font-weight-bold\">{{ nama }}?</span>\r\n              </h2>\r\n              <v-divider class=\"mb-5\"></v-divider>\r\n              <v-form ref=\"form\">\r\n                <v-text-field outlined v-model=\"judul_surat\" label=\"Judul surat\"></v-text-field>\r\n                <!-- <v-text-field outlined v-model=\"urutan_surat\" label=\"No Urut Surat\"></v-text-field> -->\r\n                <v-select\r\n                  outlined\r\n                  v-model=\"jenis_surat\"\r\n                  :rules=\"[v => !!v || 'This is required']\"\r\n                  :items=\"tipe_items\"\r\n                  label=\"Surat dari..\"\r\n                  item-text=\"name\"\r\n                  item-value=\"value\"\r\n                  required\r\n                ></v-select>\r\n                <v-select\r\n                  outlined\r\n                  v-model=\"perihal\"\r\n                  :rules=\"[v => !!v || 'This is required']\"\r\n                  :items=\"tipe_perihal\"\r\n                  label=\"Perihal..\"\r\n                  item-text=\"name\"\r\n                  item-value=\"value\"\r\n                  required\r\n                ></v-select>\r\n                <v-file-input\r\n                  v-model=\"file_surat\"\r\n                  outlined\r\n                  accept=\"application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n                  @change=\"onFilePicked\"\r\n                  ref=\"files\"\r\n                  type=\"file\"\r\n                  placeholder=\"Unggah file disini..\"\r\n                  prepend-icon=\"mdi-paperclip\"\r\n                >\r\n                  <!-- <template v-slot:selection=\"{ text }\">\r\n                  <v-chip small label color=\"primary\">{{ text }}</v-chip>\r\n                  </template>-->\r\n                </v-file-input>\r\n              </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn outlined @click=\"reset\">Batal</v-btn>\r\n              <v-btn color=\"primary\" @click=\"sendOneData\">Kirim surat</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <v-dialog v-model=\"dialogSuratBanyak\" persistent max-width=\"600px\">\r\n          <v-divider></v-divider>\r\n          <v-card class=\"pa-5\">\r\n            <v-card-text>\r\n              <h2 class=\"mb-5\">\r\n                Mengirim surat ke\r\n                <span class=\"purple--text font-weight-bold\">{{ nama }}?</span>\r\n              </h2>\r\n              <v-divider class=\"mb-5\"></v-divider>\r\n              <v-form ref=\"form\">\r\n                <v-text-field outlined v-model=\"judul_surat\" label=\"Judul surat\"></v-text-field>\r\n                <!-- <v-text-field outlined v-model=\"urutan_surat\" label=\"No Urut Surat\"></v-text-field> -->\r\n                <v-select\r\n                  outlined\r\n                  v-model=\"jenis_surat\"\r\n                  :rules=\"[v => !!v || 'This is required']\"\r\n                  :items=\"tipe_items\"\r\n                  label=\"Surat dari..\"\r\n                  item-text=\"name\"\r\n                  item-value=\"value\"\r\n                  required\r\n                ></v-select>\r\n                <v-select\r\n                  outlined\r\n                  v-model=\"perihal\"\r\n                  :rules=\"[v => !!v || 'This is required']\"\r\n                  :items=\"tipe_perihal\"\r\n                  label=\"Perihal..\"\r\n                  item-text=\"name\"\r\n                  item-value=\"value\"\r\n                  required\r\n                ></v-select>\r\n                <v-file-input\r\n                  v-model=\"file_surat\"\r\n                  outlined\r\n                  accept=\"application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n                  @change=\"onFilePicked\"\r\n                  ref=\"files\"\r\n                  type=\"file\"\r\n                  placeholder=\"Unggah file disini..\"\r\n                  prepend-icon=\"mdi-paperclip\"\r\n                >\r\n                  <!-- <template v-slot:selection=\"{ text }\">\r\n                  <v-chip small label color=\"primary\">{{ text }}</v-chip>\r\n                  </template>-->\r\n                </v-file-input>\r\n              </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn outlined @click=\"reset\">Batal</v-btn>\r\n              <v-btn color=\"primary\" @click=\"sendData\">Kirim surat</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n\r\n        <!-- dialog buat kalau emailnya sama -->\r\n        <v-dialog v-model=\"dialogEmail\" max-width=\"500\">\r\n          <v-card class=\"pa-5\">\r\n            <v-card-text>\r\n              <h2 style=\"line-height:1.5\">Email yang Anda masukkan sudah teregistrasi...</h2>\r\n            </v-card-text>\r\n\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn color=\"green darken-1\" text @click=\"dialogEmail = false\">Oke</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n      </v-app>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data: () => ({\r\n    headers: [\r\n      {\r\n        text: \"Nama\",\r\n        align: \"left\",\r\n        sortable: true,\r\n        value: \"nama\"\r\n      },\r\n      { text: \"Nidn\", value: \"nidn\", sortable: false },\r\n      { text: \"Email\", value: \"email\", sortable: false },\r\n      {\r\n        text: \"Kategori\",\r\n        value: \"kategori\",\r\n        sortable: false,\r\n        filter: value => {\r\n          return value === \"Dosen\";\r\n        }\r\n      },\r\n      { text: \"Action\", value: \"action\", sortable: false }\r\n    ],\r\n    // tipe_items: [\r\n    //   { name: \"SK Penguji\", value: \"SK Penguji\" },\r\n    //   { name: \"SK Mengajar\", value: \"SK Mengajar\" },\r\n    //   { name: \"SK Dosen Pembimbing\", value: \"SK Dosen Pembimbing\" }\r\n    // ],\r\n    tipe_items: [\r\n      { name: \"External\", value: \"P\" },\r\n      {\r\n        name: \"Internal\",\r\n        value: \"FASBIS\"\r\n      }\r\n    ],\r\n    tipe_perihal: [\r\n      { name: \"Surat Dosen\", value: \"01\" },\r\n      { name: \"Memo\", value: \"02\" },\r\n      { name: \"Surat Pengantar\", value: \"03\" },\r\n      { name: \"Surat Edaran\", value: \"04\" },\r\n      { name: \"Surat Undangan\", value: \"05\" },\r\n      { name: \"Surat Tugas\", value: \"06\" },\r\n      { name: \"Surat Kuasa\", value: \"07\" },\r\n      { name: \"Surat Pengumuman\", value: \"08\" },\r\n      { name: \"Surat Pernyataan\", value: \"09\" },\r\n      { name: \"Surat Keterangan\", value: \"10\" },\r\n      { name: \"Surat Keputusan\", value: \"11\" },\r\n      { name: \"Surat Permohonan\", value: \"12\" },\r\n      { name: \"Surat Peringatan\", value: \"13\" },\r\n      { name: \"Surat Peminjaman\", value: \"14\" },\r\n      { name: \"Surat Perjanjian\", value: \"15\" },\r\n      { name: \"Berita Acara\", value: \"16\" }\r\n    ],\r\n    perihal: \"\",\r\n    dosen: [],\r\n    show: false,\r\n    valid: true,\r\n    lazy: false,\r\n    passwordRules: [\r\n      v => !!v || \"Password harus diisi\",\r\n      v => v.length > 5 || \"Password harus lebih dari 6 karakter\"\r\n    ],\r\n    emailRules: [\r\n      v => !!v || \"E-mail harus diisi\",\r\n      v => /.+@.+/.test(v) || \"E-mail harus valid\",\r\n      v =>\r\n        /^[A-Za-z0-9._%=-]+@amikompurwokerto.ac.id$/.test(v) ||\r\n        \"Gunakan email amikompurwokerto.ac.id\"\r\n    ],\r\n    nidnRules: [\r\n      v => !!v || \"Nidn harus diisi\",\r\n      v => v.length < 11 || \"Nidn tidak boleh lebih dari 10 karakter\",\r\n      v => /^\\d+$/.test(v) || \"Nidn harus angka\"\r\n    ],\r\n    namaRules: [\r\n      v => !!v || \"Nama harus diisi\",\r\n      v => /^[A-Za-z\\s]*$/.test(v) || \"Nama tidak boleh mengandung angka\"\r\n    ],\r\n    emailValid: \"\",\r\n    search: \"\",\r\n    tipe_surat: null,\r\n    dialogAdd: false,\r\n    dialogConfirm: false,\r\n    dialogUpdate: false,\r\n    dialogSurat: false,\r\n    dialogEmail: false,\r\n    dialogSuratBanyak: false,\r\n    snackbar: false,\r\n    snackbarDelete: false,\r\n    timeout: 2000,\r\n    nama: \"\",\r\n    nidn: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    kategori: \"Dosen\",\r\n    judul_surat: \"\",\r\n    jenis_surat: \"\",\r\n    file_surat: null,\r\n    suratURL: \"\",\r\n    suratFile: \"\",\r\n    suratType: \"\",\r\n    urutan_surat: \"\",\r\n    id_user: \"\",\r\n    filter: \"Dosen\",\r\n    selected: [],\r\n    Email: \"\",\r\n    id_pengirim: \"\"\r\n  }),\r\n  created() {\r\n    this.getData();\r\n    this.getCurrentUser();\r\n  },\r\n  methods: {\r\n    multiple: function() {\r\n      // console.log();\r\n    },\r\n    getData: function() {\r\n      this.axios\r\n        .get(\"/user\")\r\n        .then(res => {\r\n          this.dosen = res.data.data;\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getCurrentUser: function() {\r\n      let userData = JSON.parse(localStorage.getItem(\"user\"));\r\n      this.currentUser = userData[0];\r\n    },\r\n    reset() {\r\n      this.$refs.form.reset();\r\n      this.dialogAdd = false;\r\n      this.dialogUpdate = false;\r\n      this.dialogSurat = false;\r\n      this.dialogConfirm = false;\r\n      this.dialogSuratBanyak = false;\r\n    },\r\n    saveData() {\r\n      let data = {\r\n        nama: this.nama,\r\n        nidn: this.nidn,\r\n        email: this.email,\r\n        password: this.password,\r\n        kategori: this.kategori,\r\n        foto: this.suratFile,\r\n        ext: this.suratType\r\n      };\r\n      this.axios\r\n        .post(\"/user\", data)\r\n        .then(res => {\r\n          // console.log(res);\r\n\r\n          this.reset();\r\n          this.getData();\r\n\r\n          if (res.data.message === \"Email Sudah ada\") {\r\n            this.dialogEmail = true;\r\n            this.reset();\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    updateData() {\r\n      let data = {\r\n        id: this.id,\r\n        nama: this.nama,\r\n        nidn: this.nidn,\r\n        email: this.email,\r\n        //  password: this.password,\r\n        kategori: this.kategori,\r\n        foto: this.suratFile,\r\n        ext: this.suratType\r\n      };\r\n      this.axios\r\n        .put(\"/user\", data)\r\n        .then(res => {\r\n          this.dialogUpdate = false;\r\n          this.getData();\r\n          this.$refs.form.reset();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    deleteData(ida) {\r\n      let data = {\r\n        id: ida\r\n      };\r\n      this.axios\r\n        .post(\"/hapususer\", data)\r\n        .then(res => {\r\n          this.dialogConfirm = false;\r\n          this.snackbarDelete = true;\r\n          this.getData();\r\n          this.$refs.form.reset();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    checkTipe(value) {\r\n      this.jenis_surat = value;\r\n    },\r\n    sendData() {\r\n      let data_surat = {\r\n        urutan: this.urutan_surat,\r\n        judul_surat: this.judul_surat,\r\n        jenis_surat: this.jenis_surat,\r\n        id_user: this.selected,\r\n        id_pengirim: this.currentUser.id,\r\n        file_surat: this.suratFile,\r\n        ext: this.suratType,\r\n        perihal: this.perihal\r\n      };\r\n\r\n      this.axios\r\n        .post(\"/surat/multi\", data_surat)\r\n        .then(res => {\r\n          this.dialogSuratBanyak = false;\r\n          this.snackbar = true;\r\n          console.log(res);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    sendOneData() {\r\n      let data_surat = {\r\n        urutan: this.urutan_surat,\r\n        judul_surat: this.judul_surat,\r\n        jenis_surat: this.jenis_surat,\r\n        id_user: this.id,\r\n        id_pengirim: this.currentUser.id,\r\n        file_surat: this.suratFile,\r\n        ext: this.suratType,\r\n        perihal: this.perihal\r\n      };\r\n\r\n      this.axios\r\n        .post(\"/surat\", data_surat)\r\n        .then(res => {\r\n          this.dialogSurat = false;\r\n          this.snackbar = true;\r\n          console.log(res);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    deleteConfirm(id) {\r\n      this.id = id;\r\n      this.dialogConfirm = true;\r\n    },\r\n    kirimConfirm(id, nama) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.dialogSurat = true;\r\n    },\r\n    kirimConfirmBanyak(id, nama) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.dialogSuratBanyak = true;\r\n    },\r\n    updateConfirmation(id, nama, nidn, email, kategori) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.nidn = nidn;\r\n      this.email = email;\r\n      this.kategori = kategori;\r\n    },\r\n    onFilePicked(e) {\r\n      const fr = new FileReader();\r\n      fr.readAsDataURL(e);\r\n      fr.addEventListener(\"load\", () => {\r\n        this.suratURL = e;\r\n        this.suratFile = fr.result; // this is an image file that can be sent to server...\r\n        if (\r\n          e.type ===\r\n          \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n        ) {\r\n          this.suratType = \"application/docx\";\r\n        } else if (e.type === \"application/msword\") {\r\n          this.suratType = \"application/doc\";\r\n        } else if (e.type === \"application/pdf\") {\r\n          this.suratType = e.type;\r\n        } else {\r\n          this.suratType = e.type;\r\n        }\r\n        //console.log(fr.result);\r\n        //console.log(e.type);\r\n      });\r\n    },\r\n    validateEmail(v) {\r\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      if (re.test(this.email)) {\r\n        //Email valid. Procees to test if it's from the right domain (Second argument is to check that the string ENDS with this domain, and that it doesn't just contain it)\r\n        if (\r\n          this.email.indexOf(\r\n            \"@amikompurwokerto.ac.id\",\r\n            this.email.length - \"@amikompurwokerto.ac.id\".length\r\n          ) !== -1\r\n        ) {\r\n          //VALID\r\n          return (this.emailValid = null);\r\n          console.log(\"VALID\");\r\n        } else {\r\n          console.log(\"invalid\");\r\n          return (this.emailValid = \"Gunakan Email Amikompurwokerto.ac.id\");\r\n        }\r\n      }\r\n    },\r\n    coba(id, nama, nidn, email) {\r\n      this.id = id;\r\n      this.nama = nama;\r\n      this.nidn = nidn;\r\n      this.email = email;\r\n\r\n      let obj = {\r\n        id: this.id\r\n        // nama: this.nama,\r\n        // nidn: this.nidn,\r\n        // email:this.nidn\r\n      };\r\n      // var arr = [];\r\n      // arr.push(id);\r\n      this.selected.push(obj);\r\n      /*\r\n      selected: [{},{}]\r\n      */\r\n      console.log(this.selected);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.v-btn {\r\n  margin-left: 0px;\r\n  margin-right: 0px;\r\n}\r\n\r\n.v-card__title {\r\n  padding: 18px 0px;\r\n}\r\n</style>"]}]}